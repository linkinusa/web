define("list:widget/list_filter/list_filter.js",function(t){var i=t("common:widget/lib/gmu/zepto/zepto.js"),e=t("common:widget/ui/http/http.js"),n=t("common:widget/ui/usertrack/usertrack.js");i(function(){function t(){o()}function o(){i("#j-filter-btn").on("click",function(){c()}),r.on("click",function(){a()}),i(".filter-checkbox").on("tap","a",function(t){var e=i(t.target);e.toggleClass("checked")}),i(".filter-radio").on("tap","a",function(t){var e=i(t.target),n=e.closest(".filter-radio");i("a",n).removeClass("checked"),e.addClass("checked")}),i(".filter-submit").on("tap","a",function(){var t=[];i("#j-filter .checked").each(function(){var e=i(this);t.push(e.data("param"))});var o=["reservation","price","meal","send"],c=e.reject(o);n.location(l+"?"+e.create(c,t.join("&")))})}function c(){if(r.show(),s.show(),!f){var t=i(window).width(),e=i(window).height(),n=s.width(),o=s.height(),c=(t-n)/2,a=(e-o)/2;s.css({left:c,top:a}),f=!0}}function a(){r.hide(),s.hide()}var r=i("#j-popup-mask"),s=i("#j-filter"),f=!1,l="/webapp/tuan/list";t()})});
;define("list:widget/list_header/list_header.js",function(n){var e=n("common:widget/lib/gmu/zepto/zepto.js");e(function(){function n(){i()}function i(){var n=e("#j-list-header"),i="w-list-header-searching";e(".j-search-input").on("focus",function(){n.addClass(i)}).on("blur",function(){}),e("#j-cancel").on("tap",function(){n.removeClass(i)})}n()})});
;define("list:widget/sort/sort-async.js",function(i){function t(i){var t=i.height()+i.offset().top,n=window.innerHeight,o=document.documentElement.scrollHeight;b.css("height",Math.max(o,t,n))}function n(i){function n(){r||(o.css("width","50%"),s.show(),r=!0)}var o=l(i).find(".j-nav"),s=l(i).find(".j-content"),c=l(i).find(".j-nav li"),a=l(i).find(".j-content ul"),d=0,r=!1;c.on("tap",function(o){o.preventDefault();var s=l(this),r=s.index();return s.hasClass(g)?(r!==d&&(n(),c.eq(d).removeClass(p),s.addClass(p),a.eq(d).hide().find("li").off("tap",e),a.eq(r).show().find("li").on("tap",e),t(l(i)),d=r),void 0):(e.apply(this),void 0)})}function o(i){l(i).find("li").on("tap",e)}function e(){if(!l(this).is(v)||!this.loading){var i=l(this).data("query"),t=h.create(i),n=l(".j-"+f[0]).get(0);n.contains(this)&&(t=h.reject(t,m)),d.send("content="+this.textContent,this),d.location(u+"?"+t)}}function s(){a(),c()}function c(){l(".j-w-sort-container section").each(function(){l(this).hasClass("w-sort__2col")?n(this):o(this)})}function a(){function i(i){return l(".j-"+l(i).data("type")).first()}var n=l(".j-w-sort li"),o=null,e=l(".j-w-sort"),s=!1;n.on("click",function(){if(s!==!0){var n=i(this);d.send("",this,!0),null!==o&&(l(o).removeClass(w),i(o).hide(),b.hide()),o!==this?(l(this).addClass(w),n.show(),b.show(),t(n),s=!0,e[0].scrollIntoView(),setTimeout(function(){s=!1},100),o=this):o=null}}),b.on("click",function(){null!==o&&(l(o).removeClass(w),i(o).hide(),b.hide(),o=null)})}var l=i("common:widget/lib/gmu/zepto/zepto.js"),d=i("common:widget/ui/usertrack/usertrack.js"),r=i("common:widget/ui/geolocation/geolocation.js"),h=i("common:widget/ui/http/http.js"),u=(i("common:widget/ui/cookie/cookie.js"),"/webapp/tuan/list"),f=["category","area","order"],v="#j-sort-nearest",m=["reservation","price","meal","send"],p="active",g="s-has-sub",w="active",j="无法获取您的位置，请选择其他排序",_="定位成功，现在为您跳转页面",b=l("<div class='w-sort__mask'></div>").appendTo(document.body);l(v)[0]._origText=l(v).text(),l(v).on("tap",function(){if(!this.loading){var i=this,t=function(){this.loading=!0;var i=this._origText+'&nbsp;&nbsp;定位中<div id="circleG"><div id="circleG_1" class="circleG"></div><div id="circleG_2" class="circleG"></div><div id="circleG_3" class="circleG"></div></div>';l(this).html(i)},n=function(i,t){this.loading=!1;var n=this;l(this).html(this._origText+"&nbsp;&nbsp;"+i),t>0&&(this.loading=!0,window.setTimeout(function(){l(n).html(n._origText),n.loading=!1},t))};t.call(this);var o=+new Date;r.getPosition(function(t){if(t){var s=+new Date-o;d.send("position=list&action=locate&type=success&time="+s),n.call(i,_),e.call(i)}},function(t){d.send("position=list&action=locate&type=failure&content="+t.html5Error.code),n.call(i,j)})}}),s()});
;define("list:widget/ui/geolocation/geolocation.js",function(o,t,e){function i(){m=F.context("position");var o=s.getItem("IS_USER_SELECT_CITY");"1"!==o&&(g.send({position:m,action:"locate",type:"all",content:""}),l.getPosition(n,c))}function n(o){if(g.send({position:m,action:"locate",type:"success",content:""}),o){var t=F.context("cityInfo")||{},e=t.shortName,i=o.shortName;if(e!=i){var n=o.domainUrl,c=o.areaId;r({hideHeader:!0,content:"糯米检测到您在"+i+"，是否切换？",context:a("#j-index").get(0),width:271,buttons:{goon:{label:"继续浏览",handler:function(){s.setItem("IS_USER_SELECT_CITY","1",1)}},"switch":{label:"立即切换",handler:function(){d.set("areaCode",c),s.setItem("IS_USER_SELECT_CITY","1",1),location.href="list"==m?"/webapp/tuan/list":"/"+n+"/"}}}})}}}function c(o){g.send({position:m,action:"locate",type:"failure",content:o.html5Error.code})}var a=o("common:widget/lib/gmu/zepto/zepto.js"),s=o("common:widget/ui/storage/storage.js"),l=o("common:widget/ui/geolocation/geolocation.js"),r=o("common:widget/ui/dialog/dialog.js"),d=o("common:widget/ui/cookie/cookie.js"),g=o("common:widget/ui/usertrack/usertrack.js"),m="";e.exports={getPosition:i}});